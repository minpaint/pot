{% extends "admin/base_site.html" %}
{% load static %}

{% block title %}–ó–∞–ø—É—Å–∫ —Ä–∞—Å—Å—ã–ª–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –º–µ–¥–æ—Å–º–æ—Ç—Ä–∞—Ö{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url 'admin:index' %}">–ì–ª–∞–≤–Ω–∞—è</a>
    &rsaquo; <a href="{% url 'admin:app_list' app_label='deadline_control' %}">–ö–æ–Ω—Ç—Ä–æ–ª—å —Å—Ä–æ–∫–æ–≤</a>
    &rsaquo; <a href="{% url 'admin:deadline_control_medicalnotificationsendlog_changelist' %}">–õ–æ–≥–∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</a>
    &rsaquo; –ó–∞–ø—É—Å–∫ —Ä–∞—Å—Å—ã–ª–∫–∏
</div>
{% endblock %}

{% block content %}
<div class="module">
    <h1>üè• –ó–∞–ø—É—Å–∫ —Ä–∞—Å—Å—ã–ª–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –º–µ–¥–æ—Å–º–æ—Ç—Ä–∞—Ö</h1>

    <div class="help" style="background-color: #e3f2fd; padding: 15px; border-left: 4px solid #2196f3; margin: 20px 0;">
        <h3>‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
        <ul>
            <li>–†–∞—Å—Å—ã–ª–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç –ø–ª–∞–Ω –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –æ—Å–º–æ—Ç—Ä–æ–≤</li>
            <li>–í–∫–ª—é—á–∞–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ <strong>–±–µ–∑ –¥–∞—Ç—ã –ú–û</strong>, —Å <strong>–ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–º–∏</strong> –∏ <strong>–ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–º–∏</strong> –º–µ–¥–æ—Å–º–æ—Ç—Ä–∞–º–∏</li>
            <li>–ü–æ–ª—É—á–∞—Ç–µ–ª–∏ –±–µ—Ä—É—Ç—Å—è –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ <strong>EmailSettings</strong> –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏</li>
            <li>–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö email –∞–¥—Ä–µ—Å–∞—Ö</li>
        </ul>
    </div>

    <form method="post" style="margin-top: 20px;">
        {% csrf_token %}

        <fieldset class="module aligned">
            <h2>üìã –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞—Å—Å—ã–ª–∫–∏</h2>

            <div class="form-row">
                <div>
                    <label for="organization" class="required">–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è:</label>
                    <select id="organization" name="organization" required>
                        <option value="">---------</option>
                        {% for org in organizations %}
                        <option value="{{ org.id }}">{{ org.short_name_ru }} - {{ org.full_name_ru }}</option>
                        {% endfor %}
                    </select>
                    <p class="help">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</p>
                </div>
            </div>

            <div class="form-row">
                <div>
                    <label for="test_mode">
                        <input type="checkbox" id="test_mode" name="test_mode">
                        –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
                    </label>
                    <p class="help">–û—Ç–º–µ—Ç—å—Ç–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ –≤–º–µ—Å—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π</p>
                </div>
            </div>

            <div class="form-row" id="test_emails_row" style="display: none;">
                <div>
                    <label for="test_emails">Email –∞–¥—Ä–µ—Å–∞ –¥–ª—è —Ç–µ—Å—Ç–∞:</label>
                    <input type="text" id="test_emails" name="test_emails" size="60"
                           placeholder="email1@example.com, email2@example.com">
                    <p class="help">–£–∫–∞–∂–∏—Ç–µ email –∞–¥—Ä–µ—Å–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏</p>
                </div>
            </div>
        </fieldset>

        <div class="help" style="background-color: #fff3cd; padding: 15px; border-left: 4px solid #ffc107; margin: 20px 0;">
            <h3>‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ!</h3>
            <ul>
                <li>–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ <strong>EmailSettings</strong> –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏</li>
                <li>–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É–∫–∞–∑–∞–Ω—ã –ø–æ–ª—É—á–∞—Ç–µ–ª–∏ –∏ SMTP —Å–µ—Ä–≤–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ</li>
                <li>–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ</li>
            </ul>
        </div>

        <div class="submit-row">
            <input type="submit" value="üìß –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É" class="default">
            <a href="{% url 'admin:deadline_control_medicalnotificationsendlog_changelist' %}" class="button">–û—Ç–º–µ–Ω–∞</a>
        </div>
    </form>
</div>

<script>
// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º –ø–æ–ª–µ –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö email –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —á–µ–∫–±–æ–∫—Å–∞
document.getElementById('test_mode').addEventListener('change', function() {
    var testEmailsRow = document.getElementById('test_emails_row');
    if (this.checked) {
        testEmailsRow.style.display = 'block';
    } else {
        testEmailsRow.style.display = 'none';
    }
});
</script>
{% endblock %}
